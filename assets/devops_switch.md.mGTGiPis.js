import{_ as s,o as i,c as a,R as n}from"./chunks/framework.0ARc0mp4.js";const l="/blog/assets/二层交换机VLAN配置.QyK_q0HG.png",h="/blog/assets/三层交换机VLAN配置_1.BLuSuqDb.png",p="/blog/assets/三层交换机VLAN配置_2.05rMyDvg.png",t="/blog/assets/三层交换机VLAN配置_3.SZ2zD6E9.png",b=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"devops/switch.md","filePath":"devops/switch.md","lastUpdated":1713431932000}'),k={name:"devops/switch.md"},e=n(`<h2 id="思科常用命令" tabindex="-1">思科常用命令 <a class="header-anchor" href="#思科常用命令" aria-label="Permalink to &quot;思科常用命令&quot;">​</a></h2><p><code>show</code>指令不能在全局配置模式下使用</p><table><thead><tr><th>命令</th><th>功能</th></tr></thead><tbody><tr><td>show interface</td><td>查看所有端口的信息</td></tr><tr><td>show vlan</td><td>查看所有VLAN的信息</td></tr><tr><td>show vlan brief</td><td>查看所有VLAN的简要信息</td></tr><tr><td>show interface interface-id switchport</td><td>查看指定端口的接入模式</td></tr><tr><td>show mac-address-table</td><td>查看MAC地址表的内容</td></tr><tr><td>show ip protocols</td><td>查看路由协议相关信息</td></tr><tr><td>show startup-config</td><td>查看系统配置</td></tr><tr><td>show running-config</td><td>查看当前的运行配置</td></tr><tr><td>copy running-config startup-config</td><td>更新系统配置</td></tr><tr><td>write</td><td>保存配置</td></tr><tr><td>reload</td><td>重启交换机</td></tr><tr><td>enable</td><td>进入特权模式</td></tr><tr><td>disable</td><td>退出特权模式</td></tr><tr><td>exit</td><td>退出到上一级配置模式</td></tr><tr><td>end</td><td>退出到特权模式</td></tr><tr><td>hostname newname</td><td>设置交换机名称(<em>需要先进入全局配置模式</em>)</td></tr><tr><td>shutdown</td><td>禁用端口</td></tr><tr><td>no shutdown</td><td>启用端口</td></tr><tr><td>configure terminal</td><td>进入全局配置模式</td></tr><tr><td>vlan vlan-id</td><td>进入VLAN的配置界面</td></tr><tr><td>name vlan-name</td><td>设置VLAN名称(<em>需要先进入VLAN配置界面</em>)</td></tr><tr><td>no vlan vlan-id</td><td>删除指定VLAN</td></tr><tr><td>interface vlan vlan-id</td><td>进入指定VLAN的配置模式(<em>VLAN其实就相当于一个虚拟端口</em>)</td></tr><tr><td>interface interface-id</td><td>进入指定端口的配置模式</td></tr><tr><td>interface range interface-id</td><td>进入批量配置端口的模式</td></tr><tr><td>duplex full</td><td>设置端口为全双工模式(<em>需要先进入指定端口配置模式</em>)</td></tr><tr><td>speed xxx</td><td>设置端口的速度(<em>需要先进入指定端口配置模式</em>)</td></tr><tr><td>ip address ip-address subnet-mask</td><td>设置端口的IP地址和子网掩码(<em>需要先进入指定端口配置模式</em>)</td></tr><tr><td>switchport mode access</td><td>设置端口为VLAN接入模式(<em>需要先进入指定端口配置模式</em>)</td></tr><tr><td>switchport mode trunk</td><td>设置端口为中继模式(<em>需要先进入指定端口配置模式</em>)</td></tr><tr><td>switchport access vlan vlan-id</td><td>将指定VLAN分配给某个端口(<em>需要先进入指定端口配置模式</em>)</td></tr></tbody></table><h2 id="开启telnet" tabindex="-1">开启telnet <a class="header-anchor" href="#开启telnet" aria-label="Permalink to &quot;开启telnet&quot;">​</a></h2><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch&gt;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch&gt;enable</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch#configure</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> terminal</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Enter</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> configuration</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> commands,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> one</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> per</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> line.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  End</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> with</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> CNTL/Z.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#interface vlan 1              // 进入vlan 1的配置模式</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config-if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#ip address 192.168.0.254 255.255.255.0     // 设置telnet地址,用来远程登录</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config-if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#no shutdown                // 让配置立即生效</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config-if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">%LINK-5-CHANGED:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Interface</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Vlan1,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> changed</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> state</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> up</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">%LINEPROTO-5-UPDOWN:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Line</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> protocol</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> on</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Interface</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Vlan1,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> changed</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> state</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> up</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config-if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#exit</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#line vty 0 4                  // 设置远程虚拟终端VTY线路数量</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config-line</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#password 123456          // 设置远程登录的密码</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config-line</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#login                    // 开启登录时需要输入密码</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config-line</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#exit</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#exit</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch#</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">%SYS-5-CONFIG_I:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Configured</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> console</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> by</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> console</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch#write</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                                 //</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 保存配置</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Building</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> configuration...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[OK]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>然后让需要进行远程登录的设备的IP地址和子网掩码与交换机的IP地址在同一网段，打开终端</p><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">telnet</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 192.168</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.0.254</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> //</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 输入登录密码即可进入交换机</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="二层交换机" tabindex="-1">二层交换机 <a class="header-anchor" href="#二层交换机" aria-label="Permalink to &quot;二层交换机&quot;">​</a></h2><p>二层交换机常常作为接入层交换机使用</p><p><img src="`+l+`" alt="" loading="lazy" decoding="async"></p><div class="warning custom-block"><p class="custom-block-title">💥正常来说，接入层交换机的上网VLAN是不应该配置IP地址的，IP要从上层路由设备获取。要管理接入层交换机应该用一个单独的VLAN，这里只是为了演示而已</p></div><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch&gt;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch&gt;enable</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch#configure</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> terminal</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Enter</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> configuration</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> commands,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> one</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> per</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> line.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  End</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> with</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> CNTL/Z.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#vlan 10                       // 创建vlan 10并进入配置界面</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config-vlan</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#name VLAN10              // 设置vlan名称</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config-vlan</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#exit</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#vlan 20                       // 创建vlan 20</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config-vlan</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#name VLAN20</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config-vlan</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#exit</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#interface vlan 10             // 进入vlan 10的配置模式</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config-if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">%LINK-5-CHANGED:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Interface</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Vlan10,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> changed</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> state</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> up</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config-if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#ip address 192.168.10.254 255.255.255.0     // 给vlan 10设置IP地址</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">//</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 如果有开启telnet登录功能的话,终端设备还能够通过这个IP地址进行远程登录</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config-if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#exit</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#interface vlan 20             // 进入vlan 20的配置模式</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config-if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">%LINK-5-CHANGED:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Interface</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Vlan20,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> changed</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> state</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> up</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config-if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#ip address 192.168.20.254 255.255.255.0     // 给vlan 20设置IP地址</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config-if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#exit</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#interface fastEthernet 0/1           // 进入端口1的配置模式</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config-if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#switchport access vlan 10         // 把端口1划分给vlan 10</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config-if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">%LINEPROTO-5-UPDOWN:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Line</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> protocol</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> on</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Interface</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Vlan1,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> changed</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> state</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> down</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">%LINEPROTO-5-UPDOWN:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Line</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> protocol</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> on</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Interface</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Vlan10,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> changed</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> state</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> up</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config-if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#exit</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#interface fastEthernet 0/2           // 进入端口2的配置模式</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config-if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#switchport access vlan 20         // 把端口2划分给vlan 20</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config-if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">%LINEPROTO-5-UPDOWN:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Line</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> protocol</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> on</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Interface</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Vlan1,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> changed</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> state</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> down</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">%LINEPROTO-5-UPDOWN:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Line</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> protocol</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> on</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Interface</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Vlan20,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> changed</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> state</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> up</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config-if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#end</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch#</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">%SYS-5-CONFIG_I:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Configured</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> console</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> by</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> console</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch#</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch#write</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                                        //</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 保存配置</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Building</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> configuration...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[OK]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br></div></div><h2 id="三层交换机常见组网" tabindex="-1">三层交换机常见组网 <a class="header-anchor" href="#三层交换机常见组网" aria-label="Permalink to &quot;三层交换机常见组网&quot;">​</a></h2><h3 id="方式一" tabindex="-1">方式一 <a class="header-anchor" href="#方式一" aria-label="Permalink to &quot;方式一&quot;">​</a></h3><div class="tip custom-block"><p class="custom-block-title">⚡实现方式为创建三层交换机的VLAN间路由</p></div><p><img src="`+h+`" alt="" loading="lazy" decoding="async"></p><ul><li><strong>①创建VLAN</strong></li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch&gt;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch&gt;enable</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch#vlan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> database</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                         //</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 进入vlan配置界面</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">%</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Warning:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> It</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> is</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> recommended</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> configure</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> VLAN</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> config</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mode,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  as</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> VLAN</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> database</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mode</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> is</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> being</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> deprecated.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Please</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> consult</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> user</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  documentation</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> configuring</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> VTP/VLAN</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> in</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> config</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mode.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(vlan</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#vlan 10 name V10                // 创建vlan 10</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">VLAN</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> added:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    Name:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> V10</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(vlan</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#vlan 20 name V20                // 创建vlan 20</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">VLAN</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 20</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> added:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    Name:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> V20</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(vlan</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#exit</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">APPLY</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> completed.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Exiting....</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><ul><li><strong>②将交换机的端口划分给VLAN</strong></li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch#</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch#configure</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> terminal</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Enter</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> configuration</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> commands,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> one</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> per</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> line.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  End</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> with</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> CNTL/Z.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#interface fastEthernet 0/1          // 进入端口1的配置模式</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config-if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#switchport access vlan 10        // 把端口1划分给vlan 10</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config-if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#exit</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#interface fastEthernet 0/2          // 进入端口2的配置模式</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config-if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#switchport access vlan 10        // 把端口2划分给vlan 10</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config-if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#exit</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#interface fastEthernet 0/3          // 进入端口3的配置模式</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config-if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#switchport access vlan 20        // 把端口3划分给vlan 20</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config-if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#exit</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#end</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><ul><li><strong>③配置VLAN间的路由</strong></li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch#</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch#configure</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> terminal</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#interface vlan 10                    // 进入vlan 10的配置模式</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">%LINK-5-CHANGED:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Interface</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Vlan10,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> changed</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> state</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> up</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">%LINEPROTO-5-UPDOWN:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Line</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> protocol</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> on</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Interface</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Vlan10,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> changed</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> state</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> up</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config-if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#ip address 192.168.10.254 255.255.255.0     // 给vlan 10设置IP地址</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config-if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#no shutdown</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config-if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#exit</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#interface vlan 20                    // 进入vlan 20的配置模式</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">%LINK-5-CHANGED:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Interface</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Vlan20,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> changed</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> state</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> up</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">%LINEPROTO-5-UPDOWN:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Line</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> protocol</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> on</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Interface</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Vlan20,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> changed</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> state</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> up</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config-if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#ip address 192.168.20.254 255.255.255.0     // 给vlan 20设置IP地址</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config-if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#no shutdown</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config-if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#exit</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#ip routing                    // 开启三层交换机的路由功能</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#end</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch#</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch#write</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                                 //</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 保存配置</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Building</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> configuration...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[OK]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch#show</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> route</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                         //</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 查看路由表</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Codes:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> C</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> connected,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> S</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> static,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> I</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> IGRP,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> R</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> RIP,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> M</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mobile,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> B</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> BGP</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">       D</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> EIGRP,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> EX</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> EIGRP</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> external,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> O</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> OSPF,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> IA</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> OSPF</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> inter</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> area</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">       N1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> OSPF</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> NSSA</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> external</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> type</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> N2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> OSPF</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> NSSA</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> external</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> type</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">       E1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> OSPF</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> external</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> type</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> E2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> OSPF</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> external</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> type</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> E</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> EGP</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">       i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> IS-IS,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> L1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> IS-IS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> level-1,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> L2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> IS-IS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> level-2,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ia</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> IS-IS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> inter</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> area</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">       *</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> candidate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> default,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> U</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> per-user</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> static</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> route,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> o</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ODR</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">       P</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> periodic</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> downloaded</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> static</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> route</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Gateway</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> of</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> last</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> resort</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> is</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> not</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> set</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">C</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    192.168</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.10.0/24</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> is</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> directly</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> connected,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Vlan10</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">C</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    192.168</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.20.0/24</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> is</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> directly</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> connected,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Vlan20</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><ul><li><strong>④为终端设备分配IP地址和配置网关</strong></li></ul><hr><h3 id="方式二" tabindex="-1">方式二 <a class="header-anchor" href="#方式二" aria-label="Permalink to &quot;方式二&quot;">​</a></h3><div class="tip custom-block"><p class="custom-block-title">⚡实现方式为创建三层交换机的VLAN间路由</p></div><p><img src="`+p+`" alt="" loading="lazy" decoding="async"></p><ul><li><strong>①先在二层交换机中创建VLAN，并将上行端口改为trunk模式</strong></li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch&gt;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch&gt;enable</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch#configure</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> terminal</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Enter</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> configuration</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> commands,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> one</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> per</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> line.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  End</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> with</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> CNTL/Z.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#vlan 10                                // 创建vlan 10并进入配置界面</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config-vlan</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#name V10                          // 设置vlan名称</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config-vlan</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#exit</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#interface fastEthernet 0/1             // 进入端口1的配置模式</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config-if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#switchport access vlan 10           // 把端口1划分给vlan 10</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config-if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#exit</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#interface fastEthernet 0/2             // 进入端口2的配置模式</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config-if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#switchport access vlan 10           // 把端口2划分给vlan 10</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config-if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#exit</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#interface fastEthernet 0/24            // 进入端口24的配置模式</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config-if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#switchport mode trunk               // 把端口24强制改为trunk模式</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config-if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">%LINEPROTO-5-UPDOWN:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Line</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> protocol</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> on</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Interface</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> FastEthernet0/24,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> changed</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> state</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> down</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">%LINEPROTO-5-UPDOWN:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Line</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> protocol</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> on</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Interface</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> FastEthernet0/24,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> changed</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> state</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> up</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config-if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#end</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch#</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">%SYS-5-CONFIG_I:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Configured</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> console</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> by</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> console</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch#write</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                                          //</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 保存配置</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Building</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> configuration...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[OK]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><ul><li><strong>②接着在三层交换机中创建和二层一样的VLAN</strong></li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch&gt;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch&gt;enable</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch#vlan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> database</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                                  //</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 进入vlan配置界面</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">%</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Warning:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> It</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> is</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> recommended</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> configure</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> VLAN</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> config</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mode,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  as</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> VLAN</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> database</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mode</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> is</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> being</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> deprecated.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Please</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> consult</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> user</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  documentation</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> configuring</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> VTP/VLAN</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> in</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> config</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mode.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(vlan</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#vlan 10 name V10                         // 创建vlan 10</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">VLAN</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> added:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    Name:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> V10</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(vlan</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#vlan 20 name V20                         // 创建vlan 20</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">VLAN</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 20</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> added:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    Name:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> V20</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(vlan</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#exit</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">APPLY</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> completed.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Exiting....</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch#</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><ul><li><strong>③给三层交换机的VLAN设置IP地址</strong></li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch#</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch#configure</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> terminal</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Enter</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> configuration</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> commands,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> one</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> per</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> line.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  End</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> with</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> CNTL/Z.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#interface vlan 10                       // 进入vlan 10的配置模式</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config-if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">%LINK-5-CHANGED:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Interface</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Vlan10,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> changed</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> state</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> up</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">%LINEPROTO-5-UPDOWN:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Line</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> protocol</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> on</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Interface</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Vlan10,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> changed</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> state</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> up</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config-if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#ip address 192.168.10.254 255.255.255.0         // 给vlan 10设置IP地址</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config-if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#exit</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#interface vlan 20                       // 进入vlan 20的配置模式</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config-if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">%LINK-5-CHANGED:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Interface</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Vlan20,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> changed</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> state</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> up</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">%LINEPROTO-5-UPDOWN:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Line</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> protocol</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> on</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Interface</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Vlan20,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> changed</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> state</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> up</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config-if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#ip address 192.168.20.254 255.255.255.0         // 给vlan 20设置IP地址</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config-if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#exit</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><ul><li><strong>④开启三层交换机的路由功能</strong></li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#ip routing                              // 开启三层交换机的路由功能</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#exit</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch#</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">%SYS-5-CONFIG_I:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Configured</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> console</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> by</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> console</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch#write</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                                           //</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 保存配置</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Building</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> configuration...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[OK]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch#</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch#show</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> route</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                                   //</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 查看路由表</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Codes:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> C</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> connected,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> S</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> static,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> I</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> IGRP,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> R</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> RIP,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> M</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mobile,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> B</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> BGP</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">       D</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> EIGRP,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> EX</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> EIGRP</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> external,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> O</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> OSPF,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> IA</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> OSPF</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> inter</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> area</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">       N1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> OSPF</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> NSSA</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> external</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> type</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> N2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> OSPF</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> NSSA</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> external</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> type</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">       E1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> OSPF</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> external</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> type</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> E2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> OSPF</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> external</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> type</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> E</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> EGP</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">       i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> IS-IS,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> L1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> IS-IS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> level-1,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> L2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> IS-IS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> level-2,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ia</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> IS-IS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> inter</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> area</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">       *</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> candidate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> default,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> U</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> per-user</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> static</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> route,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> o</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ODR</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">       P</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> periodic</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> downloaded</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> static</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> route</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Gateway</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> of</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> last</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> resort</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> is</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> not</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> set</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">C</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    192.168</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.10.0/24</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> is</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> directly</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> connected,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Vlan10</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">C</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    192.168</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.20.0/24</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> is</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> directly</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> connected,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Vlan20</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><ul><li><strong>⑤为终端设备分配IP地址和配置网关</strong></li></ul><hr><h3 id="方式三" tabindex="-1">方式三 <a class="header-anchor" href="#方式三" aria-label="Permalink to &quot;方式三&quot;">​</a></h3><div class="tip custom-block"><p class="custom-block-title">⚡实现方式为将三层交换机的交换端口改为路由端口，二层交换机作为接入层交换机保持默认就行</p></div><p><img src="`+t+`" alt="" loading="lazy" decoding="async"></p><ul><li><strong>①配置三层交换机路由端口</strong></li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch&gt;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch&gt;enable</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch#configure</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> terminal</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Enter</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> configuration</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> commands,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> one</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> per</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> line.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  End</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> with</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> CNTL/Z.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#interface fastEthernet 0/1           // 进入端口1的配置模式</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config-if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#no switchport                     // 把端口1改为路由端口</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config-if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">%LINEPROTO-5-UPDOWN:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Line</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> protocol</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> on</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Interface</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> FastEthernet0/1,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> changed</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> state</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> down</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">%LINEPROTO-5-UPDOWN:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Line</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> protocol</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> on</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Interface</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> FastEthernet0/1,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> changed</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> state</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> up</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config-if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#ip address 192.168.10.254 255.255.255.0      // 给端口1设置IP地址</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config-if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#no shutdown</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config-if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#exit</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#interface fastEthernet 0/2           // 进入端口2的配置模式</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config-if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#no switchport                     // 把端口2改为路由端口</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config-if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">%LINEPROTO-5-UPDOWN:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Line</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> protocol</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> on</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Interface</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> FastEthernet0/2,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> changed</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> state</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> down</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">%LINEPROTO-5-UPDOWN:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Line</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> protocol</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> on</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Interface</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> FastEthernet0/2,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> changed</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> state</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> up</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config-if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#ip address 192.168.20.254 255.255.255.0      // 给端口2设置IP地址</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config-if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#no shutdown</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config-if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#exit</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#ip routing                           // 开启三层交换机的路由功能</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch(config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)#end</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch#</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Switch#write</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                                        //</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 保存配置</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Building</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> configuration...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[OK]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><ul><li><strong>②为终端设备分配IP地址和配置网关</strong></li></ul>`,43),F=[e];function r(d,g,c,E,y,C){return i(),a("div",null,F)}const o=s(k,[["render",r]]);export{b as __pageData,o as default};
